<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>BeachSpot</title>
    <link rel="icon" type="image/png" href="../assets/icons/Logo BeachSpot.png">
    <script src="https://cdn.tailwindcss.com"></script>

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">

    <script src="https://unpkg.com/lucide@latest"></script>

    <style>
        body {
            font-family: 'Poppins', sans-serif;
            background: linear-gradient(135deg, #0138b4, #73bff6);
            display: flex;
            flex-direction: column;
            min-height: 100vh;
        }
        main {
            flex-grow: 1;
        }
        .tab-button {
            color: #dbeafe; /* blue-100 */
            transition: all 0.3s ease;
        }
        .tab-button:hover {
            background-color: rgba(255, 255, 255, 0.1);
        }
        .tab-button.active {
            background-color: white;
            color: #0138b4; /* Dark blue text for active */
            box-shadow: 0 4px 14px 0 rgba(0, 0, 0, 0.1);
        }
        .tab-button.active:hover {
             background-color: white;
        }
        .tab-content {
            display: none;
            animation: fadeIn 0.5s ease;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .reserva-card {
            transition: all 0.3s ease;
        }
        .reserva-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0,0,0,0.1);
        }
    </style>

</head>
<body>

    <header class="bg-white text-gray-800 fixed top-0 left-0 right-0 z-50 shadow-md">
        <nav class="container mx-auto max-w-6xl px-6 py-4 flex justify-between items-center">
             <a href="inicio.html" class="flex items-center">
                <img src="../assets/icons/Logo Preta.png" alt="Logo Beachspot" class="h-5 w-auto" onerror="this.onerror=null;this.src='https://placehold.co/150x40/000000/FFFFFF?text=beachspot&font=sans';">
            </a>
            <div class="flex items-center space-x-6">
                <a href="inicio.html" class="hidden md:block text-gray-600 hover:text-blue-600 transition duration-300 font-medium">Início</a>
                <a href="suasReservas.html" class="hidden md:block text-gray-600 hover:text-blue-600 transition duration-300 font-medium">Suas Reservas</a>
                <a href="configuracoes.html" class="text-gray-600 hover:text-blue-600 transition duration-300">
                    <i data-lucide="settings" class="w-6 h-6"></i>
                </a>
                <a href="perfilCliente.html">
                    <img src="https://placehold.co/40x40/0138b4/FFFFFF?text=C" alt="Avatar do Cliente" class="w-10 h-10 rounded-full border-2 border-blue-600 hover:opacity-90 transition-opacity">
                </a>
            </div>
        </nav>
    </header>

    <main class="pt-[72px]">
        <section class="py-16 md:py-24">
            <div class="container mx-auto max-w-4xl px-6">

                <div class="text-center mb-10">
                     <h1 class="text-4xl md:text-5xl font-bold text-white">Suas Reservas e Favoritos</h1>
                     <p class="text-lg text-blue-200 mt-2">Gerencie suas visitas e locais preferidos.</p>
                </div>

                <div class="bg-black/10 backdrop-blur-sm p-2 rounded-xl flex items-center justify-center space-x-2 mb-10 max-w-sm mx-auto">
                    <button data-tab="reservas" class="tab-button flex-1 flex items-center justify-center gap-2 font-semibold py-3 px-4 rounded-lg text-sm md:text-base">
                        <i data-lucide="calendar-check" class="w-5 h-5"></i>
                        <span>Reservas</span>
                    </button>
                    <button data-tab="favoritos" class="tab-button flex-1 flex items-center justify-center gap-2 font-semibold py-3 px-4 rounded-lg text-sm md:text-base">
                        <i data-lucide="heart" class="w-5 h-5"></i>
                        <span>Favoritos</span>
                    </button>
                </div>

                <div>
                    <div id="reservas" class="tab-content">
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <div class="reserva-card bg-white rounded-xl shadow-lg overflow-hidden flex flex-col w-full" data-id="reserva1" data-location="Praia do Futuro">
                                <img class="w-full h-48 object-cover" src="https://placehold.co/400x200/0138b4/FFFFFF?text=Quiosque+do+Sol" alt="Quiosque do Sol">
                                <div class="p-5 flex flex-col flex-grow">
                                    <div class="flex-grow">
                                        <div class="flex justify-between items-start mb-2">
                                            <h3 class="text-xl font-bold text-gray-900 reserva-title">Quiosque do Sol</h3>
                                            <p class="text-xs font-semibold text-yellow-800 bg-yellow-100 inline-block px-2 py-1 rounded-full whitespace-nowrap">Pendente</p>
                                        </div>
                                        <div class="text-sm text-gray-600 space-y-1">
                                            <p><strong class="font-semibold">Dia:</strong> 05/10/2025</p>
                                            <p><strong class="font-semibold">Horário de chegada:</strong> 14:00</p>
                                        </div>
                                    </div>
                                    <div class="flex items-center justify-between border-t border-gray-100 pt-4 mt-4">
                                        <div class="flex space-x-2">
                                            <a href="infobarraca.html" class="text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 px-3 py-1.5 rounded-md transition-colors">Ver Barraca</a>
                                            <a href="editarreserva.html" title="Editar Reserva" class="text-sm font-medium text-gray-800 bg-gray-200 hover:bg-gray-300 px-3 py-1.5 rounded-md transition-colors">
                                                Editar Reserva
                                            </a>
                                        </div>
                                        
                                        <div class="flex space-x-1">
                                            <button title="Adicionar aos Favoritos" class="favorite-btn text-gray-500 hover:text-red-500 p-2 rounded-full hover:bg-gray-100 transition-colors">
                                                <i data-lucide="heart" class="w-5 h-5"></i>
                                            </button>
                                            <button title="Excluir Reserva" class="delete-reserva-btn text-gray-500 hover:text-red-600 p-2 rounded-full hover:bg-gray-100 transition-colors">
                                                <i data-lucide="trash-2" class="w-5 h-5"></i>
                                            </button>
                                        </div>
                                    </div>
                                    </div>
                            </div>
                            
                            <div class="reserva-card bg-white rounded-xl shadow-lg overflow-hidden flex flex-col w-full" data-id="reserva2" data-location="Praia de Iracema">
                                <img class="w-full h-48 object-cover" src="https://placehold.co/400x200/3b82f6/FFFFFF?text=Barraca+da+Praia" alt="Barraca da Praia">
                                <div class="p-5 flex flex-col flex-grow">
                                    <div class="flex-grow">
                                        <div class="flex justify-between items-start mb-2">
                                            <h3 class="text-xl font-bold text-gray-900 reserva-title">Barraca da Praia</h3>
                                            <p class="text-xs font-semibold text-green-800 bg-green-100 inline-block px-2 py-1 rounded-full whitespace-nowNrap">Confirmada</p>
                                        </div>
                                        <div class="mt-2 text-sm text-gray-600 space-y-1">
                                            <p><strong class="font-semibold">Dia:</strong> 12/08/2025</p>
                                            <p><strong class="font-semibold">Horário de chegada:</strong> 11:30</p>
                                        </div>
                                    </div>
                                    <div class="flex items-center justify-between border-t border-gray-100 pt-4 mt-4">
                                        <div class="flex space-x-2">
                                            <a href="infobarraca.html" class="text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 px-3 py-1.5 rounded-md transition-colors">Ver Barraca</a>
                                            <a href="editarreserva.html" title="Editar Reserva" class="text-sm font-medium text-gray-800 bg-gray-200 hover:bg-gray-300 px-3 py-1.5 rounded-md transition-colors">
                                                Editar Reserva
                                            </a>
                                        </div>
                                        
                                        <div class="flex space-x-1">
                                            <button title="Adicionar aos Favoritos" class="favorite-btn text-gray-500 hover:text-red-500 p-2 rounded-full hover:bg-gray-100 transition-colors">
                                                <i data-lucide="heart" class="w-5 h-5"></i>
                                            </button>
                                            <button title="Excluir Reserva" class="delete-reserva-btn text-gray-500 hover:text-red-600 p-2 rounded-full hover:bg-gray-100 transition-colors">
                                                <i data-lucide="trash-2" class="w-5 h-5"></i>
                                            </button>
                                        </div>
                                    </div>
                                    </div>
                            </div>
                        </div>
                    </div>

                    <div id="favoritos" class="tab-content">
                       <div id="favorites-list" class="grid grid-cols-1 md:grid-cols-2 gap-6">
                           <p class="text-blue-200 text-center py-8 col-span-full">Você ainda não tem locais favoritos. Clique no coração para adicioná-los!</p>
                       </div>
                    </div>
                </div>

                <div class="mt-12 text-center">
                    <a href="inicio.html" class="inline-flex items-center gap-2 bg-white text-blue-600 font-bold py-3 px-8 rounded-full shadow-lg hover:bg-gray-100 hover:scale-105 transition-transform transform">
                        <i data-lucide="plus-circle" class="w-5 h-5"></i>
                        <span>Fazer mais reservas</span>
                    </a>
                </div>

            </div>
        </section>
    </main>

    <footer class="w-full bg-white text-gray-800 z-10 py-12">
        <div class="container mx-auto max-w-6xl px-6">
            <div class="flex flex-wrap justify-between items-start text-left">
                <div class="w-full md:w-auto mb-8 md:mb-0">
                    <a href="inicio.html" class="flex items-center">
                        <img src="../assets/icons/Logo Preta.png" alt="Logo Beachspot" class="h-5 w-auto" onerror="this.onerror=null;this.src='https://placehold.co/150x40/000000/FFFFFF?text=beachspot&font=sans';">
                    </a>
                </div>
                <div class="w-1/2 md:w-auto mb-8 md:mb-0">
                    <h3 class="font-bold mb-3">Navegação</h3>
                    <ul class="space-y-2">
                        <li><a href="inicio.html" class="hover:text-blue-600 transition-colors">Início</a></li>
                        <li><a href="suasReservas.html" class="hover:text-blue-600 transition-colors">Suas Reservas</a></li>
                        <li><a href="configuracoes.html" class="hover:text-blue-600 transition-colors">Configurações</a></li>
                        <li><a href="perfilCliente.html" class="hover:text-blue-600 transition-colors">Perfil</a></li>
                    </ul>
                </div>
                <div class="w-1/2 md:w-auto">
                    <h3 class="font-bold mb-3">Redes Sociais</h3>
                    <div class="flex space-x-4">
                       <div class="flex space-x-3"> 
                        <a href="https://www.instagram.com/empresa_beachspot/" class="hover:text-blue-600 transition-colors"><i data-lucide="instagram"></i></a>
                        <a href="https://x.com/site_beachspot" class="hover:text-blue-600 transition-colors"><i data-lucide="twitter"></i></a>
                        </div>
                        
                    </div>
                </div>
            </div>
            <div class="text-center mt-12 border-t border-gray-200 pt-6">
                <p>&copy; 2025 Beachspot. Todos os direitos reservados.</p>
            </div>
        </div>
    </footer>

    <div id="delete-modal-overlay" class="fixed inset-0 bg-black bg-opacity-50 backdrop-blur-sm flex items-center justify-center z-[1000] hidden">
        <div id="delete-modal" class="bg-white rounded-lg shadow-xl p-6 w-full max-w-sm mx-4 transform transition-all opacity-0 scale-95">
            <h3 class="text-xl font-bold text-gray-900 mb-3">Confirmar Exclusão</h3>
            <p class="text-gray-600 mb-6">Tem certeza que deseja excluir esta reserva?</p>
            <div class="flex justify-end space-x-3">
                <button id="modal-cancel-delete" class="px-4 py-2 rounded-md text-sm font-medium bg-blue-600 text-white hover:bg-blue-700 transition-colors">
                    Não
                </button>
                <button id="modal-confirm-delete" class="px-4 py-2 rounded-md text-sm font-medium bg-red-600 text-white hover:bg-red-700 transition-colors">
                    Sim, Excluir
                </button>
            </div>
        </div>
    </div>
    <script>
    document.addEventListener('DOMContentLoaded', () => {
        lucide.createIcons();

        const tabs = document.querySelectorAll('.tab-button');
        const tabContents = document.querySelectorAll('.tab-content');

        const firstTab = tabs[0];
        firstTab.classList.add('active'); // Activate first tab
        const firstTabContent = document.getElementById(firstTab.dataset.tab);
        if (firstTabContent) {
            firstTabContent.style.display = 'block';
        }

        tabs.forEach(tab => {
            tab.addEventListener('click', () => {
                tabs.forEach(item => item.classList.remove('active'));
                tab.classList.add('active');

                tabContents.forEach(content => {
                    content.style.display = 'none';
                });

                const activeTabContent = document.getElementById(tab.dataset.tab);
                if(activeTabContent) {
                    activeTabContent.style.display = 'block';
                }
                
                if (tab.dataset.tab === 'favoritos') {
                    renderFavorites();
                }
            });
        });

        const favoritesList = document.getElementById('favorites-list');
        const initialFavoriteMessage = favoritesList.innerHTML;

        function getFavorites() {
            return JSON.parse(localStorage.getItem('beachspot_favorites')) || [];
        }

        function saveFavorites(favorites) {
            localStorage.setItem('beachspot_favorites', JSON.stringify(favorites));
        }

        function renderFavorites() {
            const favorites = getFavorites();
            favoritesList.innerHTML = ''; 

            if (favorites.length === 0) {
                favoritesList.innerHTML = initialFavoriteMessage;
                lucide.createIcons();
                return;
            }

            favorites.forEach(fav => {
                const favoriteCard = `
                    <div class="reserva-card bg-white rounded-xl shadow-lg overflow-hidden flex flex-col w-full" data-id="${fav.id}">
                        <img class="w-full h-48 object-cover" src="${fav.image}" alt="${fav.title}">
                        <div class="p-5 flex flex-col flex-grow">
                            <div class="flex-grow">
                                <h3 class="text-xl font-bold text-gray-900">${fav.title}</h3>
                                <p class="text-sm text-gray-600 mt-1">Localização: ${fav.location}</p>
                            </div>
                            <div class="flex items-center justify-between border-t border-gray-100 pt-4 mt-4">
                                <div class="flex space-x-2">
                                    <a href="infobarraca.html" class="text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 px-3 py-1.5 rounded-md transition-colors">Ver Barraca</a>
                                </div>
                                
                                <div class="flex space-x-1">
                                    <button title="Remover dos Favoritos" class="remove-favorite-btn text-red-500 hover:text-red-600 p-2 rounded-full hover:bg-gray-100 transition-colors" data-id="${fav.id}">
                                        <i data-lucide="heart" class="w-5 h-5 fill-current"></i>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                `;
                favoritesList.insertAdjacentHTML('beforeend', favoriteCard);
            });
            lucide.createIcons();
            addRemoveFavoriteListeners();
        }
        
        function addRemoveFavoriteListeners() {
            document.querySelectorAll('#favoritos .remove-favorite-btn').forEach(button => {
                button.addEventListener('click', (e) => {
                    const idToRemove = e.currentTarget.dataset.id;
                    let favorites = getFavorites();
                    favorites = favorites.filter(fav => fav.id !== idToRemove);
                    saveFavorites(favorites);
                    renderFavorites(); 
                    updateReservationFavoriteButtons(); 
                });
            });
        }

        function updateReservationFavoriteButtons() {
            const favorites = getFavorites();
            document.querySelectorAll('#reservas .favorite-btn').forEach(button => {
                const card = button.closest('.reserva-card');
                if (!card) return;
                const cardId = card.dataset.id;
                const isFavorited = favorites.some(fav => fav.id === cardId);

                if (isFavorited) {
                    button.classList.add('text-red-500');
                    button.innerHTML = '<i data-lucide="heart" class="w-5 h-5 fill-current"></i>';
                } else {
                    button.classList.remove('text-red-500');
                    button.innerHTML = '<i data-lucide="heart" class="w-5 h-5"></i>';
                }
            });
            lucide.createIcons();
        }
        
        function addFavoriteListenersToReservations() {
            document.querySelectorAll('#reservas .favorite-btn').forEach(button => {
                button.addEventListener('click', (e) => {
                    const card = e.currentTarget.closest('.reserva-card');
                    if (!card) return;

                    const cardId = card.dataset.id;
                    let favorites = getFavorites();
                    const favoriteIndex = favorites.findIndex(fav => fav.id === cardId);

                    if (favoriteIndex > -1) { 
                        favorites.splice(favoriteIndex, 1);
                    } else { 
                        const favoriteData = {
                            id: cardId,
                            title: card.querySelector('.reserva-title').textContent.trim(),
                            location: card.dataset.location,
                            image: card.querySelector('img').src
                        };
                        favorites.push(favoriteData);
                    }
                    saveFavorites(favorites);
                    updateReservationFavoriteButtons();
                });
            });
        }

        addFavoriteListenersToReservations();
        updateReservationFavoriteButtons();

        // --- Lógica do Modal de Exclusão ---
        const modalOverlay = document.getElementById('delete-modal-overlay');
        const modal = document.getElementById('delete-modal');
        const modalCancel = document.getElementById('modal-cancel-delete');
        const modalConfirm = document.getElementById('modal-confirm-delete');
        const deleteButtons = document.querySelectorAll('#reservas .delete-reserva-btn');
        
        let cardToDelete = null;

        const showModal = () => {
            modalOverlay.classList.remove('hidden');
            setTimeout(() => { // Adiciona uma pequena animação de entrada
                modal.classList.remove('opacity-0', 'scale-95');
                modal.classList.add('opacity-100', 'scale-100');
            }, 10);
        };

        const hideModal = () => {
            modal.classList.add('opacity-0', 'scale-95');
            modal.classList.remove('opacity-100', 'scale-100');
            setTimeout(() => {
                modalOverlay.classList.add('hidden');
                cardToDelete = null;
            }, 200); // Espera a transição de saída terminar
        };

        deleteButtons.forEach(button => {
            button.addEventListener('click', (e) => {
                cardToDelete = e.currentTarget.closest('.reserva-card');
                if (cardToDelete) {
                    showModal();
                }
            });
        });

        modalCancel.addEventListener('click', hideModal);
        
        modalOverlay.addEventListener('click', (e) => {
            if (e.target === modalOverlay) {
                hideModal();
            }
        });

        modalConfirm.addEventListener('click', () => {
            if (cardToDelete) {
                // Animação de saída do card
                cardToDelete.style.transition = 'opacity 0.3s ease, transform 0.3s ease, margin 0.3s ease';
                cardToDelete.style.opacity = '0';
                cardToDelete.style.transform = 'scale(0.95)';
                cardToDelete.style.marginBottom = `-${cardToDelete.offsetHeight}px`; // Puxa o conteúdo abaixo
                
                // Remove o card após a animação
                setTimeout(() => {
                    cardToDelete.remove();
                    cardToDelete = null;
                }, 300);
            }
            hideModal();
        });
        // --- Fim da Lógica do Modal ---
    });
    </script>
</body>
</html>